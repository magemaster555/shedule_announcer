# shedule_announcer
Send a message to you in telegram, when shedule on website changes.
Сама система делится на 2 части: парсер сайта и бот в телеграме.
# Parser:
Импортируйте файл.
```import shedule```
Инициализируйте объект класса Shedule без параметров, чтобы подключиться к сайту по аресу по умолчанию. Если адрес поменяется, в качестве первого аргумента нудо указать нвоый адрес.
```myshedule = shedule.Shedule()
myshedule_new_url = shedule.Shedule("http://new_address.com")
```

Для тестового режима предусмотрена возможность инициальзации с 2 параметрами: 1) путь до html файла, 2) флаг, указывающий, что используется режим чтения файла, а не веб страницы.
```myshedule = shedule.Shedule("page.html", True)
```

Информацию о изменениях можно получать сразу после инициализации, методом getGroupsInfo.
В качестве аргументра принимается либо строка - название группы, либо массив, элементами которого являются строки - названия групп.
Метод возвращает json(dict). Элементы json - названия групп. Каждый такой жлемент содержит массив изменений. Каждый элемент такого массива - 2 объекта: num - номер заменяемой пары и name - название заменяемой пары.
```changes_by_str = myshedule.getGroupsChanges("21-ІП")
>> {'21-ІП': [{'num': 4, 'name': 'Інформаційні технології'}, {'num': 6, 'name': 'Іноземна мова'}, {'num': 7, 'name': 'Операційні системи'}]}

changes_by_list = myshedule.getGroupsChanges(["21-ІП", "22-ІП", "23-ІП"])
>> {'21-ІП': [{'num': 4, 'name': 'Інформаційні технології'}, {'num': 6, 'name': 'Іноземна мова'}, {'num': 7, 'name': 'Операційні системи'}], '22-ІП': [{'num': 5, 'name': 'Операційні системи'}, {'num': 6, 'name': 'Інформац.технології'}], '23-ІП': [{'num': 6, 'name': 'Операційні системи'}, {'num': 7, 'name': 'Інформаційні технології'}]}
```

Проверку на изменения можно проводить в бесконечном цикле.
```oldchanges = myshedule.getGroupsChanges(["21-ІП", "22-ІП", "23-ІП"])
while True:
  changes = myshedule.getGroupsChanges(["21-ІП", "22-ІП", "23-ІП"])
  if oldchanges != changes:
    ....
```
 
В бесконечном цикле стоит использовать метод update, который получает актуальную информацию с сайта.
```while True:
  ...
  ...
  myshedule.update()
```
  
# Telegram:
Импортируйте файл.
```import tg```
Проинициализируйте объект класса Tg. В качестве первого обязательного аргумента необходимо передать API TOKEN. В качестве второго необязательного, но, в случае примера, упрощающего жизнь, CHAT ID, куда будет присылаться информация по найденным изменениям.
```bot = tg.Tg("123123:sdfsdfsdf", -123456)
bot1 = tg.Tg("123123:sdfsdfsdf")
```
Отправлять сообщения можно методом say. В случае указания CHAT ID при инициализации, сообщение будет отправлено на указанный при инициализации CHAT ID. Если все же указать другой CHAT ID в качестве параметра метода say, сообщение будет отправлено по этому CAHT ID.
```bot.say("Это сообщение отправлено на CHAT ID = -123456")
bot1.say("Это сообщение отправлено на CHAT ID = 654321", 654321)
```
